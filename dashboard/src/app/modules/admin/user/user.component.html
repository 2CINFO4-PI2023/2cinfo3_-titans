<div class="flex flex-col flex-auto min-w-0">
    <!-- Main -->
    <div class="flex-auto p-6 sm:p-10">
        <!-- CONTENT GOES HERE -->
        <div
            class="h-400 min-h-400 max-h-400 border-2 border-dashed border-gray-300 rounded-2xl"
        >
        
        <div class="overflow-x-auto mx-6">
            <button
        class="mt-3 mr-3"
        mat-flat-button
        [color]="'primary'" [routerLink]="['/utilisateurs', 'add']">Ajouter un utilisateur</button>
        
            </div>

            <div>
                <fuse-alert
                    class="mt-8 mb-4 mr-5 ml-5"
                    *ngIf="showAlert"
                    [appearance]="'outline'"
                    [showIcon]="false"
                    [type]="alert.type"
                    [@shake]="alert.type === 'error'"
                >
                    {{ alert.message }}
                </fuse-alert>
            </div>

            <div class="overflow-x-auto mx-6">
                <table
                    class="w-full bg-transparent"
                    mat-table
                    matSort
                    [dataSource]="usersDataSource"
                    #usersTable
                >
                    <!-- Name -->
                    <ng-container matColumnDef="name">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Name
                        </th>
                        <td mat-cell *matCellDef="let user">
                            <span class="pr-6 whitespace-nowrap">
                                {{ user.name }}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Name -->
                    <ng-container matColumnDef="email">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            email
                        </th>
                        <td mat-cell *matCellDef="let user">
                            <span class="pr-6 whitespace-nowrap">
                                {{ user.email }}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Amount -->
                    <ng-container matColumnDef="role">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Role
                        </th>
                        <td mat-cell *matCellDef="let user">
                            <span class="pr-6 font-medium whitespace-nowrap">
                                {{ roles[user.role] }}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Status -->
                    <ng-container matColumnDef="status">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            Status
                        </th>
                        <td mat-cell *matCellDef="let user">
                            <mat-slide-toggle
                    class="ml-2"
                    [color]="'primary'"
                    [checked]="user.confirmed"
                    (change)="toggleConfirmation(user._id,$event)"
                    #communication>
                </mat-slide-toggle>
                            <!-- <span
                                class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase"
                                [ngClass]="{
                                    'bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50':
                                        user.confirmed == true,
                                    'bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50':
                                        user.confirmed == false
                                }"
                            >
                                <span
                                    class="leading-relaxed whitespace-nowrap"
                                    >{{
                                        user.confirmed ? "valide" : "Non valide"
                                    }}</span
                                >
                            </span> -->
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef>Actions</th>
                        <td mat-cell *matCellDef="let user">
                            <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
                                <button
                                class="mr-3"
                                mat-flat-button
                                [color]="'warn'" (click)="openConfirmationDialog(user._id)">Delete</button>
                                <button
                                class="mr-3"

                                mat-flat-button
                                [color]="'primary'"  [routerLink]="['/utilisateurs', 'update', user._id]">Update</button>
                              </mat-button-toggle-group>
                        </td>
                    </ng-container>
                    <!-- Footer -->
                    <!-- <ng-container matColumnDef="recentOrdersTableFooter">
                        <td
                            class="py-6 px-0 border-0"
                            mat-footer-cell
                            *matFooterCellDef
                            colspan="6">
                            <button mat-stroked-button>See all transactions</button>
                        </td>
                    </ng-container> -->

                    <tr
                        mat-header-row
                        *matHeaderRowDef="recentTransactionsTableColumns"
                    ></tr>
                    <tr
                        class="order-row h-16"
                        mat-row
                        *matRowDef="
                            let row;
                            columns: recentTransactionsTableColumns
                        "
                    ></tr>
                    <!-- <tr
                        class="h-16 border-0"
                        mat-footer-row
                        *matFooterRowDef="['recentOrdersTableFooter']"></tr> -->
                </table>
            </div>
        </div>
    </div>
</div>
